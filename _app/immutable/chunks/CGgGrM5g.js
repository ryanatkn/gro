import{R as _,u as y,T as k,h as o,C as E,U as w,k as u,y as p,n as m,j as d,q as T,V as v,W as A,X as b,Y as C,Z as g,_ as F,$ as M,e as R,o as D,m as N,a0 as x,E as O}from"./OozpsuF9.js";let f;function H(){f=void 0}function Y(c){let e=null,a=o;var t;if(o){for(e=d,f===void 0&&(f=T(document.head));f!==null&&(f.nodeType!==E||f.data!==w);)f=u(f);f===null?p(!1):f=m(u(f))}o||(t=document.head.appendChild(_()));try{y(()=>c(t),k)}finally{a&&(p(!0),f=d,m(e))}}class S{anchor;#s=new Map;#t=new Map;#e=new Map;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#n=()=>{var e=v;if(this.#s.has(e)){var a=this.#s.get(e),t=this.#t.get(a);if(t)A(t);else{var s=this.#e.get(a);s&&(this.#t.set(a,s.effect),this.#e.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),t=s.effect)}for(const[n,i]of this.#s){if(this.#s.delete(n),n===e)break;const r=this.#e.get(i);r&&(b(r.effect),this.#e.delete(i))}for(const[n,i]of this.#t){if(n===a)continue;const r=()=>{if(Array.from(this.#s.values()).includes(n)){var l=document.createDocumentFragment();F(i,l),l.append(_()),this.#e.set(n,{effect:i,fragment:l})}else b(i);this.#t.delete(n)};this.#a||!t?C(i,r,!1):r()}}};ensure(e,a){var t=v,s=M();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(s){var n=document.createDocumentFragment(),i=_();n.append(i),this.#e.set(e,{effect:g(()=>a(i)),fragment:n})}else this.#t.set(e,g(()=>a(this.anchor)));if(this.#s.set(t,e),s){for(const[r,h]of this.#t)r===e?t.skipped_effects.delete(h):t.skipped_effects.add(h);for(const[r,h]of this.#e)r===e?t.skipped_effects.delete(h.effect):t.skipped_effects.add(h.effect);t.add_callback(this.#n)}else o&&(this.anchor=d),this.#n()}}function j(c,e,...a){var t=new S(c);y(()=>{const s=e()??null;t.ensure(s,s&&(n=>s(n,...a)))},O)}function q(c){return(e,...a)=>{var t=c(...a),s;if(o)s=d,R();else{var n=t.render().trim(),i=D(n);s=T(i),e.before(s)}const r=t.setup?.(s);N(s,s),typeof r=="function"&&x(r)}}export{S as B,q as c,Y as h,H as r,j as s};
